- 07:05: 2026-02-11 AL cleanup complete: removed 5 ghost instances, disabled Upstairs Zone. Final config: 2 AL instances (Living Spaces + Entry Room Ceiling) managing 5 lights total. System clean and working.
- 07:05: 2026-02-11 AL cleanup complete: Removed 5 ghost instances (bedroom_test, kitchen_entry_ceiling, living_room_ceiling, kitchen_chandelier, pre_release), disabled Upstairs Zone AL. Final config: 2 active AL instances - Living Spaces (4 accent lamps) + Entry Room Ceiling (1 motion light) = 5 lights under AL control. 141 lights remain manual/automation-controlled. Ghost entity conflicts resolved, system clean and working.
- 14:38: 2026-02-11 AL cleanup complete: Removed 5 ghost instances (bedroom_test, kitchen_entry_ceiling, living_room_ceiling, kitchen_chandelier, pre_release), disabled Upstairs Zone AL. Final config: 2 active AL instances - Living Spaces (4 accent lamps) + Entry Room Ceiling (1 motion light) = 5 lights under AL control. 141 lights remain manual/automation-controlled. Ghost entity conflicts resolved, system clean and working.
- 14:41: 2026-02-11 AL cleanup complete: Removed 5 ghost instances (bedroom_test, kitchen_entry_ceiling, living_room_ceiling, kitchen_chandelier, pre_release), disabled Upstairs Zone AL. Final config: 2 active AL instances - Living Spaces (4 accent lamps) + Entry Room Ceiling (1 motion light) = 5 lights under AL control. 141 lights remain manual/automation-controlled. Ghost entity conflicts resolved, system clean and working.
- 15:07: MCP Privacy Policy: Claude has READ-ONLY access to motion/door/temp sensors for context. Claude CANNOT control and has NO live access to: garage doors (covers), locks, water valves, or network equipment. These exist in context CSVs for knowledge but are intentionally blocked from MCP control/query. If user asks about their state, acknowledge from context but state 'I don't have live MCP access - please check HA app.'
- 15:09: MCP Exposure Audit: CORRECT command is 'ha core info' (works). INCORRECT: jq query on entity_registry/list endpoint - API format incompatible. Always verify exposure via HA UI: Settings > Voice Assistants > Assist > Exposed Entities. No reliable CLI method exists for exposure status.
- 15:09: MCP Privacy Boundaries: LIVE ACCESS via MCP = motion sensors (binary_sensor.*_motion), door sensors (binary_sensor.*_door), temp/humidity (sensor.*_temperature/humidity), lights. BLOCKED from MCP = garage door covers (cover.garage_*), locks (lock.*), water valve controls (switch.*_valve*), network equipment (button.usw_*). Context CSVs contain ALL devices for knowledge; MCP provides live state only for safe sensors.
- 15:12: URGENT: Water valve control (switch.basement_domestic_water_main_valve) currently EXPOSED to MCP - must be blocked immediately. Also found: basement_avr_hard_reset exposed. Both are safety-critical controls that should never be in MCP exposure.
- 15:15: AVR hard reset correction: User correctly identified this is just a smart plug for AV receiver, not a critical safety device. Low risk - acceptable to remain exposed. Only TRUE safety-critical items are: water valve (now blocked), garage door covers, locks, network equipment.
- 15:22: MCP Exposure Complete: Added 8 motion sensors + 5 door sensors via terminal script. Total safe sensors now exposed: kitchen/living/entry/upstairs motion detection + all door sensors (garage walk-in, front doors, garage bay door sensors). Water valve remains blocked.
- 15:33: MCP Full Exposure Complete: Exposed all 290 zero-risk sensors (temperature, humidity, battery, power monitoring). Critical controls remain blocked: garage doors, locks, water valve, network equipment. Total MCP context now maximized while maintaining safety.
- 16:10: Upstairs hallway 3-way switch testing in progress. User will determine if switch cuts power to light or if power is always hot. This determines whether Hue click switch installation is required before automations can work. Apollo Pro mmWave sensors planned for kitchen testing, then bedroom installations.
- 17:00: Terminal heredoc syntax (cat << 'EOF') consistently fails in zsh causing dquote> prompts. ALWAYS use simple echo redirection instead: echo 'content' > file. Avoid multi-line heredocs in all future sessions. Use printf or multiple echo commands for multi-line content. This prevents terminal quote hell.
- 17:00: Session 2026-02-12 achievements: MCP exposure optimized (290 safe sensors exposed, critical controls blocked), lighting issues diagnosed (Alaina LED needs auto-off, upstairs hallway needs time-based automation or Hue click switch), Apollo Pro mmWave strategy created for future bedroom occupancy detection. Awaiting 3-way switch power test to determine implementation path.
- 17:02: HAC prompt optimization needed: Review all learnings for common patterns, terminal preferences (zsh, no heredocs, simple commands), HA debugging workflow, MCP privacy model, Git habits. Goal: Create condensed strategic session starter that gives LLM maximum context with minimum tokens.
- 17:16: CRITICAL: Avoid complex multi-step scripts that chain multiple heredocs and loops. Script went into infinite loop creating files. Always use simple, single-purpose commands. Test scripts individually before chaining.
- 17:43: HAC export workflow: 'hac export' generates comprehensive Excel files (FULL, AI_SAFE, LLM.json) from current HA state - includes entities, devices, areas, integrations, automations, and learnings. Useful for: 1) Generating fresh context before major sessions, 2) Sharing sanitized system state, 3) External analysis in Excel, 4) Backup snapshots. Files sync to Google Drive automatically. Consider running export at session start for up-to-date context.
- 17:48: Community validation 2026-02-12: Researched current HA best practices from reputable sources (Official HA docs, How-To Geek, HA Community, Pulcro Security). Confirmed HAC workflow and automation patterns align with 2024-2026 recommendations: 1) Area-based targeting (not individual devices), 2) LLM exposure minimization (290 safe sensors optimal), 3) Local control priority, 4) mode: restart for motion automations, 5) Dual-trigger patterns, 6) Git-based backups. V3 prompt automation workflow (entity verification, group checking, YAML safety) exceeds standard practices. System is following industry best practices.
- 18:24: System audit 2026-02-12: Identified 607 unavailable entities (19%) and 1,369 unassigned entities (43%) as critical issues. Mass trigger event on Feb 11 23:34 was one-time HA restart event, not active loop. Git corruption resolved with aggressive GC. Priority actions: entity cleanup sprint, area assignment for top 100 entities, UI automation audit. Full audit report in docs/HA_System_Audit_2026-02-12.md
