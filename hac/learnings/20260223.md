
## Living Room A/V Integration Complete

### Hardware Setup
- **Fire TV Omni 75"** (ASIN B08T6JZTH4) - Built-in Fire TV, no external box
- **Yamaha RX-V671** - In basement, Zone 1 serves Living Room via HDMI ARC
- **Connection**: Fire TV HDMI eARC → Yamaha HDMI OUT (ARC audio return)
- **AVR Input**: `AV1` (receives audio via ARC, not HDMI input 1-5)
- **Speakers**: Klipsch L/R + Center, powered subwoofer on smart plug
- **Zone 2**: Reserved for future Back Patio Klipsch outdoor speakers

### Entity Mapping
| Device | Entity ID | Area |
|--------|-----------|------|
| Fire TV Omni | `media_player.living_room_fire_tv_192_168_1_17` | Living Room |
| Fire TV Remote | `remote.living_room_fire_tv_192_168_1_17` | Living Room |
| Yamaha Main | `media_player.basement_yamaha_av_receiver_rx_v671_main` | Living Room |
| Yamaha Zone 2 | `media_player.rx_v671_zone2` | Back Patio |
| Subwoofer Plug | `switch.living_room_subwoofer_plug` | Living Room |
| Workout TV (Vizio) | `media_player.living_room` (Cast, often unavailable) | Workout Area |

### Integration Details
- **Fire TV**: ADB integration (IP: 192.168.1.17, port 5555)
- **Yamaha**: YNCA custom integration v9.4.0, firmware AC7.201
- **Fire TV States**: `playing`, `paused`, `idle`, `standby`, `off`
- **Key attribute**: `app_id` shows current app (e.g., `com.netflix.ninja`)

### Automations Created
1. `automation.living_room_avr_on_when_fire_tv_active` - Fire TV playing/wake → AVR on + AV1 + subwoofer
2. `automation.living_room_avr_off_when_fire_tv_idle` - 10min idle → AVR off + subwoofer off
3. `automation.living_room_subwoofer_sync_with_avr` - Backup sync subwoofer with AVR state

### Script Created
- `script.living_room_movie_mode` - Full movie mode: AVR on, AV1, volume 45%, subwoofer on, ceiling off, floor lamps 10%

### Yamaha Settings (Current)
- Initial Volume: -15.5 dB
- Max Volume: -5.0 dB
- Speaker Bass: +0.5 dB
- Speaker Treble: +4.5 dB
- Surround Decoder: Dolby Pro Logic

### FUTURE: Klipsch Optimization Session
- Review receiver settings for Klipsch speaker characteristics
- Klipsch tend to be bright - may need treble adjustment
- Subwoofer crossover and level calibration
- YPAO room correction if available
- Sound mode recommendations per content type

## ARC vs Optical Discovery

### Current Audio Path (Working)
- **Optical cable**: Fire TV Omni → Yamaha RX-V671 optical input
- **Source**: AV1 (optical audio assigned here)
- **HDMI cable**: Yamaha HDMI OUT → TV HDMI eARC (video passthrough only, ARC not active)

### Problem
- Fire TV remote volume buttons use **CEC over HDMI**
- Optical audio bypasses CEC — remote cannot control Yamaha volume
- Must use Yamaha remote or HA for volume control

### Solution Required (Future Session)
1. Unplug optical cable from Yamaha
2. Enable HDMI Control on Yamaha: Setup → HDMI → HDMI Control → ON
3. Enable ARC on Yamaha: Setup → HDMI → ARC → ON
4. On Fire TV/TV: Set audio output to HDMI ARC (not optical)
5. Find correct Yamaha source for ARC input (likely AV4 or TV input)
6. Update HA automation to use new source instead of AV1

### Volume Automation Note
- Automation now sets 35% volume on Fire TV wake/play
- Prevents blast volume on startup
- Volume level 0.35 ≈ -52.5 dB on Yamaha scale

### Subwoofer Plug Confirmed Working
- Entity: `switch.living_room_subwoofer_plug`
- ZHA Third Reality 3RSP02028BZ
- Power sensor: `sensor.kitchen_echo_show_plug_power` (misnamed but works)
- Standby draw: ~8.7W
- Some child entities have wrong names (kitchen_echo_show_plug_*) - cleanup candidate
