# Kitchen Inovelli Switch Automations
# Consolidated from ui_automations.yaml

# Kitchen Lounge - VZM36 Fan/Light Controller
- id: kitchen_lounge_vzm36_fixed
  alias: Kitchen Lounge - VZM36 Fan/Light (Hue Ceiling)
  description: Up=Hue lights on, Down=Hue lights off, Config=Fan cycle
  trigger:
    - platform: event
      event_type: zha_event
  condition: '{{ trigger.event.data.device_id == "608cdc81a73355aec629b4a3938fbbaf" }}'
  action:
    - variables:
        command: '{{ trigger.event.data.command }}'
    - choose:
        - conditions: '{{ command == "button_3_press" }}'
          sequence:
            - choose:
                - conditions:
                    - condition: state
                      entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      state: 'off'
                  sequence:
                    - service: fan.set_percentage
                      target:
                        entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      data:
                        percentage: 33
                - conditions:
                    - condition: numeric_state
                      entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      attribute: percentage
                      below: 50
                  sequence:
                    - service: fan.set_percentage
                      target:
                        entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      data:
                        percentage: 66
                - conditions:
                    - condition: numeric_state
                      entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      attribute: percentage
                      below: 90
                  sequence:
                    - service: fan.set_percentage
                      target:
                        entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      data:
                        percentage: 100
              default:
                - service: fan.turn_off
                  target:
                    entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
  mode: queued

# Kitchen Lounge - VZM31-SN Dimmer
- id: kitchen_lounge_dimmer_fixed
  alias: Kitchen Lounge - VZM31-SN Dimmer (Hue Ceiling)
  description: Up=Hue lights on, Down=off, Config=Fan cycle
  trigger:
    - platform: event
      event_type: zha_event
  condition: '{{ trigger.event.data.device_id == "5e2d477e04d216ab91a0c2f1364ab118" }}'
  action:
    - variables:
        command: '{{ trigger.event.data.command }}'
    - choose:
        - conditions: '{{ command == "button_2_press" }}'
          sequence:
            - service: light.turn_on
              target:
                entity_id:
                  - light.kitchen_lounge_ceiling_1of2
                  - light.kitchen_lounge_ceiling_2of2
        - conditions: '{{ command == "button_1_press" }}'
          sequence:
            - service: light.turn_off
              target:
                entity_id:
                  - light.kitchen_lounge_ceiling_1of2
                  - light.kitchen_lounge_ceiling_2of2
        - conditions: '{{ command == "button_3_press" }}'
          sequence:
            - choose:
                - conditions:
                    - condition: state
                      entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      state: 'off'
                  sequence:
                    - service: fan.set_percentage
                      target:
                        entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      data:
                        percentage: 33
                - conditions:
                    - condition: numeric_state
                      entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      attribute: percentage
                      below: 50
                  sequence:
                    - service: fan.set_percentage
                      target:
                        entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      data:
                        percentage: 66
                - conditions:
                    - condition: numeric_state
                      entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      attribute: percentage
                      below: 90
                  sequence:
                    - service: fan.set_percentage
                      target:
                        entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
                      data:
                        percentage: 100
              default:
                - service: fan.turn_off
                  target:
                    entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
  mode: queued

# Kitchen Chandelier Control (5 bulbs)
- id: kitchen_chandelier_switch_v2
  alias: Kitchen - Chandelier Control (5 Bulbs)
  description: Inovelli controls 5-bulb chandelier
  trigger:
    - platform: event
      event_type: zha_event
  condition: '{{ trigger.event.data.device_id == "17a59d3c437c3475f22c29dd2b76777a" }}'
  action:
    - variables:
        command: '{{ trigger.event.data.command }}'
    - choose:
        - conditions: '{{ command == "button_2_press" }}'
          sequence:
            - service: light.turn_on
              target:
                entity_id:
                  - light.kitchen_chandelier_1of5
                  - light.kitchen_chandelier_2of5
                  - light.kitchen_chandelier_3of5
                  - light.kitchen_chandelier_4of5
                  - light.hue_color_candle_5
        - conditions: '{{ command == "button_1_press" }}'
          sequence:
            - service: light.turn_off
              target:
                entity_id:
                  - light.kitchen_chandelier_1of5
                  - light.kitchen_chandelier_2of5
                  - light.kitchen_chandelier_3of5
                  - light.kitchen_chandelier_4of5
                  - light.hue_color_candle_5
  mode: queued

# Kitchen Above Sink Inovelli
- id: kitchen_above_sink_inovelli
  alias: Kitchen Above Sink - Inovelli Control
  description: Inovelli controls above-sink light
  trigger:
    - platform: event
      event_type: zha_event
  condition: '{{ trigger.event.data.device_id == "89ca030d64760ad87512e97d13a2737d" }}'
  action:
    - variables:
        command: '{{ trigger.event.data.command }}'
    - choose:
        - conditions: '{{ command == "button_2_press" }}'
          sequence:
            - service: light.turn_on
              target:
                entity_id: light.hue_color_downlight_1_3
        - conditions: '{{ command == "button_1_press" }}'
          sequence:
            - service: light.turn_off
              target:
                entity_id: light.hue_color_downlight_1_3
  mode: queued
