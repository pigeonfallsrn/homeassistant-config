- id: alaina_led_strip_lights_button
  alias: Alaina's LED Strip Lights Button
  trigger:
  - platform: state
    entity_id: input_button.alaina_led_strip_lights
  action:
  - service: light.toggle
    target:
      entity_id: light.alaina_s_led_strips
  mode: single
- id: alaina_led_strip_auto_off
  alias: Alaina's LED Strips - Auto Off at Midnight
  description: Turn off Alaina's LED strips at midnight
  trigger:
  - platform: time
    at: 00:00:00
  condition: []
  action:
  - service: light.turn_off
    target:
      entity_id: light.alaina_s_led_strips
  mode: single
- id: '1771364980856'
  alias: Front Driveway Inovelli - Hue Lights Control
  description: Front Driveway Inovelli VZM30-SN controls Front Driveway Hue lights
    via ZHA events
  triggers:
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: c0:9b:9e:ff:fe:d1:2d:4e
  actions:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.command == "on" or (trigger.event.data.params.button
          == "button_2" and trigger.event.data.params.press_type == "press") }}'
      sequence:
      - target:
          entity_id: light.front_driveway
        action: light.turn_on
    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.command == "off" or (trigger.event.data.params.button
          == "button_1" and trigger.event.data.params.press_type == "press") }}'
      sequence:
      - target:
          entity_id: light.front_driveway
        action: light.turn_off
    - conditions:
      - condition: template
        value_template: '{{ trigger.event.data.params.button == "button_3" and trigger.event.data.params.press_type
          == "press" }}'
      sequence:
      - target:
          entity_id: light.front_driveway
        action: light.toggle
  mode: single
- id: '1771532178019'
  alias: Entry Room Ceiling - Inovelli Controls Hue Lights
  description: Entry Room Ceiling Inovelli VZM31-SN controls Entry Room Ceiling Hue
    White bulbs
  use_blueprint:
    path: fxlt/zha-inovelli-vzm31-sn-blue-series-2-1-switch.yaml
    input:
      inovelli_switch: d80c7fa6d013f0fd1cbdd6f67c6a1cac
      button_1:
      - action: light.turn_off
        target:
          entity_id:
          - light.entry_rm_ceiling_hue_white_1_2
          - light.entry_rm_ceiling_hue_white_2_2
      button_2:
      - action: light.turn_on
        target:
          entity_id:
          - light.entry_rm_ceiling_hue_white_1_2
          - light.entry_rm_ceiling_hue_white_2_2
      button_1_hold:
      - action: light.turn_on
        target:
          entity_id:
          - light.entry_rm_ceiling_hue_white_1_2
          - light.entry_rm_ceiling_hue_white_2_2
        data:
          brightness_step_pct: -10
      button_2_hold:
      - action: light.turn_on
        target:
          entity_id:
          - light.entry_rm_ceiling_hue_white_1_2
          - light.entry_rm_ceiling_hue_white_2_2
        data:
          brightness_step_pct: 10
- id: '1771556632224'
  alias: Kitchen Lounge - Inovelli Controls Hue Ceiling
  description: 'fxlt blueprint: Kitchen Lounge Inovelli VZM31-SN controls Hue ceiling
    lights'
  use_blueprint:
    path: fxlt/zha-inovelli-vzm31-sn-blue-series-2-1-switch.yaml
    input:
      inovelli_switch: 5e2d477e04d216ab91a0c2f1364ab118
      button_1:
      - target:
          entity_id: light.kitchen_lounge
        action: light.turn_off
      button_2:
      - target:
          entity_id: light.kitchen_lounge
        action: light.turn_on
      button_1_hold:
      - target:
          entity_id: light.kitchen_lounge
        data:
          brightness_step_pct: -10
        action: light.turn_on
      button_2_hold:
      - target:
          entity_id: light.kitchen_lounge
        data:
          brightness_step_pct: 10
        action: light.turn_on
      button_2_double:
      - target:
          entity_id: light.kitchen_lounge
        data:
          brightness_pct: 100
        action: light.turn_on
      button_1_double:
      - target:
          entity_id: light.kitchen_lounge
        data:
          brightness_pct: 10
        action: light.turn_on
- id: '1771557081733'
  alias: Kitchen Lounge - Aux Switch Controls Hue + Fan
  description: 'Aux paddle=Hue lights, Config buttons control fan (main=button_3,
    aux=button_6). Multi-tap: 1x=low, 2x=med, 3x=high, hold=off'
  triggers:
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 04:e3:e5:ff:fe:5f:55:c6
      cluster_id: 64561
      command: button_5_press
    id: aux_up
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 04:e3:e5:ff:fe:5f:55:c6
      cluster_id: 64561
      command: button_4_press
    id: aux_down
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 04:e3:e5:ff:fe:5f:55:c6
      cluster_id: 64561
      command: button_3_press
    id: config_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 04:e3:e5:ff:fe:5f:55:c6
      cluster_id: 64561
      command: button_3_hold
    id: config_hold
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 04:e3:e5:ff:fe:5f:55:c6
      cluster_id: 64561
      command: button_3_double
    id: config_double
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 04:e3:e5:ff:fe:5f:55:c6
      cluster_id: 64561
      command: button_3_triple
    id: config_triple
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 04:e3:e5:ff:fe:5f:55:c6
      cluster_id: 64561
      command: button_6_press
    id: aux_config_press
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 04:e3:e5:ff:fe:5f:55:c6
      cluster_id: 64561
      command: button_6_hold
    id: aux_config_hold
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 04:e3:e5:ff:fe:5f:55:c6
      cluster_id: 64561
      command: button_6_double
    id: aux_config_double
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 04:e3:e5:ff:fe:5f:55:c6
      cluster_id: 64561
      command: button_6_triple
    id: aux_config_triple
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: aux_up
      sequence:
      - target:
          entity_id: light.kitchen_lounge
        action: light.turn_on
    - conditions:
      - condition: trigger
        id: aux_down
      sequence:
      - target:
          entity_id: light.kitchen_lounge
        action: light.turn_off
    - conditions:
      - condition: trigger
        id:
        - config_press
        - aux_config_press
      sequence:
      - target:
          entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
        data:
          percentage: 33
        action: fan.set_percentage
    - conditions:
      - condition: trigger
        id:
        - config_double
        - aux_config_double
      sequence:
      - target:
          entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
        data:
          percentage: 66
        action: fan.set_percentage
    - conditions:
      - condition: trigger
        id:
        - config_triple
        - aux_config_triple
      sequence:
      - target:
          entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
        data:
          percentage: 100
        action: fan.set_percentage
    - conditions:
      - condition: trigger
        id:
        - config_hold
        - aux_config_hold
      sequence:
      - target:
          entity_id: fan.kitchen_lounge_light_fan_inovelli_vzm36_fan
        action: fan.turn_off
  mode: single
- id: '1771854304476'
  alias: 2nd Floor Bathroom - Humidity Fan Control v2
  description: Automatic fan control based on humidity derivative with Navien pre-trigger
    and manual override. Rising humidity or sustained hot water flow turns fan on.
    Falling humidity + delay turns off. Manual paddle override disables auto for 30min.
  triggers:
  - platform: numeric_state
    entity_id: sensor.2nd_floor_bathroom_humidity_derivative
    above: 1.5
    id: humidity_rising
  - platform: numeric_state
    entity_id: sensor.2nd_floor_bathroom_humidity_derivative
    below: -0.5
    for:
      minutes: 2
    id: humidity_falling
  - platform: numeric_state
    entity_id: sensor.navien_water_flow
    above: 0.5
    for:
      minutes: 2
    id: hot_water_pretrigger
  - platform: numeric_state
    entity_id: sensor.1st_floor_bathroom_vanity_lights_humidity
    above: 65
    id: max_humidity
  conditions:
  - condition: state
    entity_id: input_boolean.bathroom_2nd_floor_fan_manual_override
    state: 'off'
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - humidity_rising
        - hot_water_pretrigger
        - max_humidity
      sequence:
      - target:
          entity_id: fan.inovelli_vzm35_sn_fan
        action: fan.turn_on
    - conditions:
      - condition: trigger
        id: humidity_falling
      sequence:
      - delay:
          minutes: 5
      - condition: numeric_state
        entity_id: sensor.1st_floor_bathroom_vanity_lights_humidity
        below: 60
      - target:
          entity_id: fan.inovelli_vzm35_sn_fan
        action: fan.turn_off
  mode: restart
- id: '1771854392376'
  alias: 2nd Floor Bathroom - Fan Inovelli Paddle Control v2
  description: Inovelli VZM35-SN paddle controls fan directly. Up=On, Down=Off. Sets
    manual override for 30 minutes to prevent humidity auto from interfering.
  triggers:
  - platform: event
    event_type: zha_event
    event_data:
      device_id: 3eed85f7ca546a7ed7e24b0cfc6c818b
      command: button_2_press
    id: up_press
  - platform: event
    event_type: zha_event
    event_data:
      device_id: 3eed85f7ca546a7ed7e24b0cfc6c818b
      command: button_1_press
    id: down_press
  - platform: event
    event_type: zha_event
    event_data:
      device_id: 3eed85f7ca546a7ed7e24b0cfc6c818b
      command: button_2_hold
    id: up_hold
  - platform: event
    event_type: zha_event
    event_data:
      device_id: 3eed85f7ca546a7ed7e24b0cfc6c818b
      command: button_1_hold
    id: down_hold
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - up_press
        - up_hold
      sequence:
      - target:
          entity_id: fan.inovelli_vzm35_sn_fan
        action: fan.turn_on
      - target:
          entity_id: input_boolean.bathroom_2nd_floor_fan_manual_override
        action: input_boolean.turn_on
      - target:
          entity_id: timer.bathroom_2nd_floor_fan
        data:
          duration: 00:30:00
        action: timer.start
    - conditions:
      - condition: trigger
        id:
        - down_press
        - down_hold
      sequence:
      - target:
          entity_id: fan.inovelli_vzm35_sn_fan
        action: fan.turn_off
      - target:
          entity_id: input_boolean.bathroom_2nd_floor_fan_manual_override
        action: input_boolean.turn_on
      - target:
          entity_id: timer.bathroom_2nd_floor_fan
        data:
          duration: 00:30:00
        action: timer.start
  mode: single
- id: '1771854413864'
  alias: 2nd Floor Bathroom - Reset Fan Override on Timer
  description: Clear manual override when 30-minute timer expires, allowing humidity
    automation to resume control.
  triggers:
  - platform: event
    event_type: timer.finished
    event_data:
      entity_id: timer.bathroom_2nd_floor_fan
  actions:
  - target:
      entity_id: input_boolean.bathroom_2nd_floor_fan_manual_override
    action: input_boolean.turn_off
  mode: single
- id: '1771858450789'
  alias: Living Room - AVR On When Fire TV Active
  description: Turn on AVR at 30% volume, set to AV1 (HDMI1 passthrough), and power
    subwoofer when Fire TV starts playing or wakes from standby
  triggers:
  - id: fire_tv_playing
    platform: state
    entity_id: media_player.living_room_fire_tv_192_168_1_17
    to: playing
  - id: fire_tv_woke_up
    platform: state
    entity_id: media_player.living_room_fire_tv_192_168_1_17
    from: standby
    to: idle
  conditions: []
  actions:
  - parallel:
    - sequence:
      - action: media_player.turn_on
        target:
          entity_id: media_player.basement_yamaha_av_receiver_rx_v671_main
      - delay:
          seconds: 3
      - action: media_player.select_source
        target:
          entity_id: media_player.basement_yamaha_av_receiver_rx_v671_main
        data:
          source: AV1
      - action: media_player.volume_set
        target:
          entity_id: media_player.basement_yamaha_av_receiver_rx_v671_main
        data:
          volume_level: 0.3
    - action: switch.turn_on
      target:
        entity_id: switch.living_room_subwoofer_plug
  mode: single
- id: '1771858469033'
  alias: Living Room - AVR Off When Fire TV Idle
  description: Turn off AVR and subwoofer after Fire TV idle/standby for 10 minutes
  triggers:
  - platform: state
    entity_id: media_player.living_room_fire_tv_192_168_1_17
    to:
    - idle
    - standby
    - 'off'
    for:
      minutes: 10
  conditions:
  - condition: state
    entity_id: media_player.basement_yamaha_av_receiver_rx_v671_main
    state: 'on'
  actions:
  - parallel:
    - target:
        entity_id: media_player.basement_yamaha_av_receiver_rx_v671_main
      action: media_player.turn_off
    - sequence:
      - delay:
          seconds: 5
      - target:
          entity_id: switch.living_room_subwoofer_plug
        action: switch.turn_off
  mode: restart
- id: '1771858527176'
  alias: Living Room - Subwoofer Sync with AVR
  description: Keep subwoofer power synced with AVR state as backup
  triggers:
  - platform: state
    entity_id: media_player.basement_yamaha_av_receiver_rx_v671_main
    to: 'on'
    id: avr_on
  - platform: state
    entity_id: media_player.basement_yamaha_av_receiver_rx_v671_main
    to: 'off'
    for:
      seconds: 5
    id: avr_off
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id: avr_on
      sequence:
      - condition: state
        entity_id: switch.living_room_subwoofer_plug
        state: 'off'
      - target:
          entity_id: switch.living_room_subwoofer_plug
        action: switch.turn_on
    - conditions:
      - condition: trigger
        id: avr_off
      sequence:
      - condition: state
        entity_id: switch.living_room_subwoofer_plug
        state: 'on'
      - target:
          entity_id: switch.living_room_subwoofer_plug
        action: switch.turn_off
  mode: restart
